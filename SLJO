-- credits to francy for helping

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local character = player.Character or player.CharacterAdded:Wait()
local rootPart = character:WaitForChild("HumanoidRootPart")

local checkpointsFolder = workspace:WaitForChild("Checkpoints")
local rebirthEvent = ReplicatedStorage:WaitForChild("RebirthEvent")

local checkpoints = {}
for i = 1, 45 do
    local checkpoint = checkpointsFolder:FindFirstChild(tostring(i))
    if checkpoint then
        table.insert(checkpoints, checkpoint)
    end
end

print("Checkpoints cargados: " .. #checkpoints)

local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false

local pauseButton = Instance.new("TextButton")
pauseButton.Size = UDim2.new(0, 100, 0, 50)
pauseButton.Position = UDim2.new(0, 10, 0, 10)  
pauseButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
pauseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
pauseButton.TextScaled = true
pauseButton.Font = Enum.Font.SourceSansBold
pauseButton.Text = "Pause"
pauseButton.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = pauseButton


local isRunning = true
local connection

local function fastTeleport()
    for _, checkpoint in ipairs(checkpoints) do
        if not isRunning then return end  -- Check 
        rootPart.CFrame = checkpoint.CFrame + Vector3.new(0, 3, 0)
        if firetouchinterest then
            firetouchinterest(rootPart, checkpoint, 0)
            firetouchinterest(rootPart, checkpoint, 1)
        end
    end
    if isRunning and rebirthEvent then
        rebirthEvent:FireServer()
    end
end

-- Start
connection = RunService.Heartbeat:Connect(fastTeleport)

-- Toggle 
pauseButton.Activated:Connect(function()
    isRunning = not isRunning
    if isRunning then
        pauseButton.Text = "Pause"
        if not connection.Connected then
            connection = RunService.Heartbeat:Connect(fastTeleport)
        end
    else
        pauseButton.Text = "Play"
        if connection.Connected then
            connection:Disconnect()
        end
    end
end)

print("Auto-teleport started with pause button in top-left")
